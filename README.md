概述
教学演示系统主要是在直播过程中添加虚拟元素，教师可以通过教师端控制虚拟元素，学生端通过观看视频实现教学。教师端、学生端、渲染端、采集端都通过web页面实现，不需要本地部署。
部署
Web服务部署
教师教师端、学生端、渲染端、采集端采用webrtc技术，部署为https站点就可以。测试过程中我采用了nginx 端口为1443.
 
聊天服务部署
Webrtc指令协商使用socketid编写，使用node可以启动服务，但是node采用的是http服务，为了适应webrtc的https协议需要采用nginx进行转发。
1、	使用node启动聊天服务>node socketioserver3.js，端口已经在代码中写死为8800
 
2、	Nginx配置文件增加https转发
 
相机校准
校准内参

注意
使用一个棋盘，其中一个边包含偶数个正方形，另一边包含奇数个正方形。使用非方形图案包含沿一侧的两个黑色角和另一侧的两个白色角。此标准使应用程序能够确定图案的方向和原点。校准器将较长的一侧指定为 x方向。方形图案可以为相机外在元素产生意想不到的结果。
 
为了获得更好的结果，请使用至少 10 到 20 张校准图案的图像
•	将棋盘放置在相对于相机平面小于 45 度的角度。
 
•	不要修改图像（例如，不要裁剪它们）。
•	请勿使用自动对焦或更改图像之间的缩放设置。
•	在相对于相机的不同方向捕获棋盘图案的图像。
•	捕获图案的各种图像，以便尽可能多地考虑图像帧。镜头畸变从图像中心呈放射状增加，有时在整个图像帧中不均匀。为了捕捉这种镜头畸变，图案必须出现在靠近所捕捉图像边缘的地方。
 
校准器适用于各种棋盘格尺寸。作为一般规则，您的棋盘格应至少填充所捕获图像的 20%。例如，前面的图像是用 108 毫米的棋盘格尺寸拍摄的，如下图所示：
 

获取相机姿态和位置属性
将相机固定到需要最终授课的位置标定版本水平放到地面上，标定板左上角内角点作为中心点。需要说明的是为了保证校准的准确性请确保中心点和相机z轴距离在10厘米以内。
1、	通过相机对棋盘格进行拍照，标定板需要放到舞台水平中心。
 

2、	使用校准工具计算相机的旋转、位置和fov，并将结果输入到教室端输入框内。参考开启教学。可以公共辅助工具查看虚拟中心（小红点）和标定盘左上角内角点的位置判断标定是否准确。（最终位置虚拟中心和标定板左上角内角点距离不能超过一个标定块，否则需要重新校正）。
 
 

位置评估以及开启教学
将相机固定到直播角度并将棋盘格放到直播位置拍照后进行位置评估
启动渲染端
浏览器中输入：https://xxxxxx:1443/fenzi.html?mode=server
 
启动采集端
采集端浏览器输入下面地址：https://xxxxx:1443/clientcamera.html
 
点击“位置定位按钮”拍照后进行定位。
启动教师端
教师端浏览器输入：https://192.168.10.61:1443/fenzi.html?mode=teacher
 
通过该页面进行教学
启动学生端
学生端浏览器输入：https://192.168.10.61:1443/client.html
学生端支持多个学生同时接入。
快捷启动
除了上述通过熟人地址的方式启动外还可以通过下面的快捷方式进行启动，点击对应的按钮启动相应的页面。
https://192.168.10.61:1443/client.html
 
问题
如果出现问题如掉线等可以重新启动聊天服务器“node socketioserver3.js”，并关闭所有浏览器后重新打开浏览器进入
